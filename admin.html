<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Portal</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #loginBox { margin-bottom: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #f2f2f2; }
  </style>
</head>
<body>
  <h2>üîê Admin Login</h2>
  <div id="loginBox">
    <input type="password" id="password" placeholder="Enter password">
    <button onclick="login()">Login</button>
  </div>

  <div id="adminPanel" style="display:none;">
    <h2>üìã All Survey Responses</h2>
    <table id="responsesTable">
      <thead>
        <tr id="headerRow"></tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <script>
    function login() {
      const pass = document.getElementById("password").value;
      if (pass === "1212") {
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
        loadResponses();
      } else {
        alert("‚ùå Wrong password!");
      }
    }

    function loadResponses() {
      let allResponses = JSON.parse(localStorage.getItem("allResponses")) || [];

      if (allResponses.length === 0) {
        document.getElementById("tableBody").innerHTML = "<tr><td colspan='10'>No responses yet.</td></tr>";
        return;
      }

      // Build table headers dynamically from first response keys
      let headers = Object.keys(allResponses[0]);
      let headerRow = document.getElementById("headerRow");
      headerRow.innerHTML = "";
      headers.forEach(h => {
        let th = document.createElement("th");
        th.textContent = h;
        headerRow.appendChild(th);
      });

      // Build table rows
      let tableBody = document.getElementById("tableBody");
      tableBody.innerHTML = "";
      allResponses.forEach(resp => {
        let tr = document.createElement("tr");
        headers.forEach(h => {
          let td = document.createElement("td");
          td.textContent = Array.isArray(resp[h]) ? resp[h].join(", ") : resp[h];
          tr.appendChild(td);
        });
        tableBody.appendChild(tr);
      });
    }
  </script>
</body>
</html>
